<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤–∞–º–∏</title>
    <style type="text/css">
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .table th, .table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .table th { background-color: #f5f5f5; }
        .btn { padding: 8px 12px; margin: 5px; text-decoration: none; border: none; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .form-group { margin: 10px 0; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, select { width: 100%; padding: 8px; border: 1px solid #ddd; }
        .messages { color: red; margin: 10px 0; }
        .pagination { margin: 20px 0; }
    </style>
</h:head>

<h:body>
    <div class="container">
        <h1>üìñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–∂–Ω—ã–º–∏ —Å—É—â–µ—Å—Ç–≤–∞–º–∏</h1>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div style="margin-bottom: 20px;">
            <h:form>
                <h:commandButton value="üè† –ì–ª–∞–≤–Ω–∞—è" action="index" styleClass="btn"/>
                <h:commandButton value="üèôÔ∏è –ì–æ—Ä–æ–¥–∞" action="cities" styleClass="btn"/>
            </h:form>
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö/—É—Å–ø–µ—Ö–µ -->
        <h:messages globalOnly="false" styleClass="messages" infoClass="success" errorClass="error"/>

        <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å—É—â–µ—Å—Ç–≤–∞ -->
        <h:form id="createForm">
            <h3>‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Å—É—â–µ—Å—Ç–≤–æ</h3>

            <div class="form-group">
                <h:outputLabel for="name" value="–ò–º—è:"/>
                <h:inputText id="name" value="#{bookCreatureBean.newCreature.name}" required="true" requiredMessage="–ò–º—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"/>
            </div>

            <div class="form-group">
                <h:outputLabel for="age" value="–í–æ–∑—Ä–∞—Å—Ç:"/>
                <h:inputText id="age" value="#{bookCreatureBean.newCreature.age}" required="true" requiredMessage="–í–æ–∑—Ä–∞—Å—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω">
                    <f:validateLongRange minimum="1"/>
                </h:inputText>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="form-group">
                    <h:outputLabel for="x" value="–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ X:"/>
                    <h:inputText id="x" value="#{bookCreatureBean.newCreature.coordinates.x}" required="true">
                        <f:validateDoubleRange minimum="-998.999"/>
                    </h:inputText>
                </div>

                <div class="form-group">
                    <h:outputLabel for="y" value="–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ Y:"/>
                    <h:inputText id="y" value="#{bookCreatureBean.newCreature.coordinates.y}" required="true">
                        <f:validateLongRange minimum="-933"/>
                    </h:inputText>
                </div>
            </div>

            <div class="form-group">
                <h:outputLabel for="attackLevel" value="–£—Ä–æ–≤–µ–Ω—å –∞—Ç–∞–∫–∏:"/>
                <h:inputText id="attackLevel" value="#{bookCreatureBean.newCreature.attackLevel}" required="true">
                    <f:validateLongRange minimum="1"/>
                </h:inputText>
            </div>

            <div class="form-group">
                <h:outputLabel for="creatureType" value="–¢–∏–ø —Å—É—â–µ—Å—Ç–≤–∞:"/>
                <h:selectOneMenu id="creatureType" value="#{bookCreatureBean.newCreature.creatureType}">
                    <f:selectItem itemLabel="–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø" noSelectionOption="true"/>
                    <f:selectItem itemLabel="HOBBIT" itemValue="HOBBIT"/>
                    <f:selectItem itemLabel="ELF" itemValue="ELF"/>
                    <f:selectItem itemLabel="HUMAN" itemValue="HUMAN"/>
                    <f:selectItem itemLabel="GOLLUM" itemValue="GOLLUM"/>
                </h:selectOneMenu>
            </div>

            <div class="form-group">
                <h:outputLabel for="city" value="–ì–æ—Ä–æ–¥:"/>
                <h:selectOneMenu id="city" value="#{bookCreatureBean.newCreature.creatureLocation}">
                    <f:selectItem itemLabel="–ë–µ–∑ –≥–æ—Ä–æ–¥–∞" noSelectionOption="true"/>
                    <f:selectItems value="#{bookCreatureBean.availableCities}"
                                   var="city"
                                   itemLabel="#{city.name}"
                                   itemValue="#{city}"/>
                    <f:validator validatorId="debugValidator"/>
                </h:selectOneMenu>

            </div>

            <div class="form-group">
                <h:outputLabel for="ring" value="–ö–æ–ª—å—Ü–æ:"/>
                <h:selectOneMenu id="ring" value="#{bookCreatureBean.newCreature.ring}">
                    <f:selectItem itemLabel="–ë–µ–∑ –∫–æ–ª—å—Ü–∞" noSelectionOption="true"/>
                    <f:selectItems value="#{bookCreatureBean.availableRings}"
                                   var="ring"
                                   itemLabel="#{ring.name}"
                                   itemValue="#{ring}"/>
                    <f:validator validatorId="debugValidator"/>
                </h:selectOneMenu>
            </div>

            <h:commandButton value="–°–æ–∑–¥–∞—Ç—å —Å—É—â–µ—Å—Ç–≤–æ"
                             action="#{bookCreatureBean.createCreature}"
                             styleClass="btn btn-primary"/>
        </h:form>

        <hr/>

        <!-- –¢–∞–±–ª–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤ -->
        <h3>üìã –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤ (–í—Å–µ–≥–æ: #{bookCreatureBean.totalCount})</h3>

        <h:form id="listForm">
            <h:dataTable value="#{bookCreatureBean.creatures}" var="creature" styleClass="table">
                <h:column>
                    <f:facet name="header">ID</f:facet>
                    #{creature.id}
                </h:column>

                <h:column>
                    <f:facet name="header">–ò–º—è</f:facet>
                    #{creature.name}
                </h:column>

                <h:column>
                    <f:facet name="header">–¢–∏–ø</f:facet>
                    #{creature.creatureType}
                </h:column>

                <h:column>
                    <f:facet name="header">–í–æ–∑—Ä–∞—Å—Ç</f:facet>
                    #{creature.age}
                </h:column>

                <h:column>
                    <f:facet name="header">–£—Ä–æ–≤–µ–Ω—å –∞—Ç–∞–∫–∏</f:facet>
                    #{creature.attackLevel}
                </h:column>

                <h:column>
                    <f:facet name="header">–ì–æ—Ä–æ–¥</f:facet>
                    #{creature.creatureLocation != null ? creature.creatureLocation.name : '–ù–µ—Ç'}
                </h:column>

                <h:column>
                    <f:facet name="header">–ö–æ–ª—å—Ü–æ</f:facet>
                    #{creature.ring != null ? creature.ring.name : '–ù–µ—Ç'}
                </h:column>

                <h:column>
                    <f:facet name="header">–î–µ–π—Å—Ç–≤–∏—è</f:facet>
                    <h:commandButton value="‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
                                     action="#{bookCreatureBean.setSelectedCreature(creature)}"
                                     styleClass="btn"/>

                    <h:commandButton value="üóëÔ∏è –£–¥–∞–ª–∏—Ç—å"
                                     action="#{bookCreatureBean.deleteCreature}"
                                     onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ #{creature.name}?')"
                                     styleClass="btn btn-danger">
                        <f:setPropertyActionListener target="#{bookCreatureBean.selectedCreature}" value="#{creature}"/>
                    </h:commandButton>
                </h:column>
            </h:dataTable>

            <!-- –ü—Ä–æ—Å—Ç–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è -->
            <div class="pagination">
                <h:commandButton value="‚èÆÔ∏è –ü–µ—Ä–≤–∞—è" action="#{bookCreatureBean.firstPage}"
                                 disabled="#{bookCreatureBean.currentPage == 1}"/>

                <h:commandButton value="‚óÄÔ∏è –ù–∞–∑–∞–¥" action="#{bookCreatureBean.previousPage}"
                                 disabled="#{bookCreatureBean.currentPage == 1}"/>

                <span> –°—Ç—Ä–∞–Ω–∏—Ü–∞ #{bookCreatureBean.currentPage} </span>

                <h:commandButton value="–í–ø–µ—Ä–µ–¥ ‚ñ∂Ô∏è" action="#{bookCreatureBean.nextPage}"
                                 disabled="#{bookCreatureBean.currentPage * bookCreatureBean.pageSize >= bookCreatureBean.totalCount}"/>

                <h:commandButton value="–ü–æ—Å–ª–µ–¥–Ω—è—è ‚è≠Ô∏è" action="#{bookCreatureBean.lastPage}"
                                 disabled="#{bookCreatureBean.currentPage * bookCreatureBean.pageSize >= bookCreatureBean.totalCount}"/>

                <div>
                    <h:outputLabel for="pageSizeSelect" value="–≠–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ:"/>
                    <h:selectOneMenu id="pageSizeSelect" value="#{bookCreatureBean.pageSize}">
                        <f:selectItem itemLabel="5" itemValue="5"/>
                        <f:selectItem itemLabel="10" itemValue="10"/>
                        <f:selectItem itemLabel="20" itemValue="20"/>
                        <f:selectItem itemLabel="50" itemValue="50"/>
                        <f:ajax listener="#{bookCreatureBean.setPageSize(bookCreatureBean.pageSize)}"
                                render="listForm"/>
                    </h:selectOneMenu>
                </div>
            </div>
        </h:form>
    </div>
</h:body>
</html>
