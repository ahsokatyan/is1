<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞–º–∏</title>
    <style type="text/css">
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .table th, .table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .table th { background-color: #f5f5f5; }
        .btn { padding: 8px 12px; margin: 5px; text-decoration: none; border: none; cursor: pointer; }
        .btn-primary { background: #007bff; color: white; }
        .pagination { margin: 20px 0; text-align: center; }
    </style>
</h:head>

<h:body>
    <div class="container">
        <h1>üèôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏ –≥–æ—Ä–æ–¥–∞–º–∏</h1>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div style="margin-bottom: 20px;">
            <h:form>
                <h:commandButton value="üè† –ì–ª–∞–≤–Ω–∞—è" action="index" styleClass="btn"/>
                <h:commandButton value="üìñ –°—É—â–µ—Å—Ç–≤–∞" action="creatures" styleClass="btn"/>
                <h:commandButton value="üíç –ö–æ–ª—å—Ü–∞" action="rings" styleClass="btn"/>
<!--                <h:link outcome="create-city" value="‚ûï –°–æ–∑–¥–∞—Ç—å –≥–æ—Ä–æ–¥" styleClass="btn btn-primary"/>-->
            </h:form>
        </div>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö/—É—Å–ø–µ—Ö–µ -->
        <h:messages globalOnly="false" styleClass="messages" infoClass="success" errorClass="error"/>
        <div style="border: 1px solid #ccc; padding: 20px; margin: 20px 0;">
            <h3>üîç –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–∞ –ø–æ ID</h3>
            <h:form>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <h:inputText value="#{navigationBean.searchId}" required="true"
                                 style="padding: 8px; width: 200px;"
                                 placeholder="–í–≤–µ–¥–∏—Ç–µ ID –≥–æ—Ä–æ–¥–∞"/>
                    <h:commandButton value="–ù–∞–π—Ç–∏" action="#{navigationBean.searchCity}"
                                     style="padding: 8px 16px;"/>
                </div>
            </h:form>
        </div>
        <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –≥–æ—Ä–æ–¥–∞ -->
        <div style="margin-bottom: 20px;">
            <h:link outcome="create-city" value="‚ûï –°–æ–∑–¥–∞—Ç—å –º–∞–≥–∏—á–µ—Å–∫–∏–π –ì–æ—Ä–æ–¥" styleClass="btn btn-primary"
                    style="font-size: 16px; padding: 10px 20px;"/>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è -->
        <div style="border: 1px solid #ccc; padding: 15px; margin: 20px 0; background-color: #f9f9f9;">
            <h3>üîç –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≥–æ—Ä–æ–¥–æ–≤</h3>
            <h:form>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <h:inputText value="#{magicCityListBean.filterName}"
                                 style="padding: 8px; width: 300px;"
                                 placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∞—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞"/>
                    <h:commandButton value="üîç –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å"
                                     action="#{magicCityListBean.filterCities}"
                                     style="padding: 8px 16px;"/>
                    <h:commandButton value="‚ùå –°–±—Ä–æ—Å"
                                     action="#{magicCityListBean.resetFilter}"
                                     style="padding: 8px 16px;"/>
                </div>
                <p style="margin-top: 10px; color: #666;"
                   rendered="#{magicCityListBean.filterName != null and magicCityListBean.filterName != ''}">
                   –§–∏–ª—å—Ç—Ä: "#{magicCityListBean.filterName}"
                </p>
            </h:form>
        </div>

        <hr/>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –≥–æ—Ä–æ–¥–æ–≤ -->
        <h3>üìã –°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ (–í—Å–µ–≥–æ: #{magicCityListBean.totalCount})</h3>

        <h:form id="listForm">
            <h:dataTable value="#{magicCityListBean.cities}" var="city" styleClass="table">
                <h:column>
                    <f:facet name="header">
                        <h:commandLink action="#{magicCityListBean.sortBy('id')}" style="text-decoration: none; color: inherit;">
                           ID#{magicCityListBean.getSortIndicator('id')}
                        </h:commandLink>
                    </f:facet>
                    #{city.id}
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:commandLink action="#{magicCityListBean.sortBy('name')}" style="text-decoration: none; color: inherit;">
                           –ù–∞–∑–≤–∞–Ω–∏–µ#{magicCityListBean.getSortIndicator('name')}
                        </h:commandLink>
                    </f:facet>
                    #{city.name}
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:commandLink action="#{magicCityListBean.sortBy('area')}" style="text-decoration: none; color: inherit;">
                           –ü–ª–æ—â–∞–¥—å#{magicCityListBean.getSortIndicator('area')}
                        </h:commandLink>
                    </f:facet>
                    #{city.area}
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:commandLink action="#{magicCityListBean.sortBy('population')}" style="text-decoration: none; color: inherit;">
                           –ù–∞—Å–µ–ª–µ–Ω–∏–µ#{magicCityListBean.getSortIndicator('population')}
                        </h:commandLink>
                    </f:facet>
                    #{city.population}
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:commandLink action="#{magicCityListBean.sortBy('governor')}" style="text-decoration: none; color: inherit;">
                           –ü—Ä–∞–≤–∏—Ç–µ–ª—å#{magicCityListBean.getSortIndicator('governor')}
                        </h:commandLink>
                    </f:facet>
                    #{city.governor}
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:commandLink action="#{magicCityListBean.sortBy('capital')}" style="text-decoration: none; color: inherit;">
                           –°—Ç–æ–ª–∏—Ü–∞#{magicCityListBean.getSortIndicator('capital')}
                        </h:commandLink>
                    </f:facet>
                    <h:outputText value="–î–∞" rendered="#{city.capital}"/>
                    <h:outputText value="–ù–µ—Ç" rendered="#{not city.capital}"/>
                </h:column>

                <h:column>
                    <f:facet name="header">–î–µ–π—Å—Ç–≤–∏—è</f:facet>
                    <h:link outcome="view-city" value="üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä" style="margin-right: 5px;">
                        <f:param name="id" value="#{city.id}"/>
                    </h:link>
                    <h:link outcome="edit-city" value="‚úèÔ∏è –†–µ–¥–∞–∫—Ç." style="margin-right: 5px;">
                        <f:param name="id" value="#{city.id}"/>
                    </h:link>
                    <h:link outcome="delete-city" value="üóëÔ∏è –£–¥–∞–ª–∏—Ç—å">
                        <f:param name="id" value="#{city.id}"/>
                    </h:link>
                </h:column>
            </h:dataTable>

            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
            <div class="pagination">
                <h:commandButton value="‚èÆÔ∏è –ü–µ—Ä–≤–∞—è"
                                 action="#{magicCityListBean.firstPage}"
                                 disabled="#{magicCityListBean.currentPage == 1}"
                                 styleClass="btn"/>

                <h:commandButton value="‚óÄÔ∏è –ù–∞–∑–∞–¥"
                                 action="#{magicCityListBean.previousPage}"
                                 disabled="#{magicCityListBean.currentPage == 1}"
                                 styleClass="btn"/>

                <span style="margin: 0 15px; font-weight: bold;">
                    –°—Ç—Ä–∞–Ω–∏—Ü–∞ #{magicCityListBean.currentPage} –∏–∑ #{magicCityListBean.totalPages}
                </span>

                <h:commandButton value="–í–ø–µ—Ä–µ–¥ ‚ñ∂Ô∏è"
                                 action="#{magicCityListBean.nextPage}"
                                 disabled="#{magicCityListBean.currentPage >= magicCityListBean.totalPages}"
                                 styleClass="btn"/>

                <h:commandButton value="–ü–æ—Å–ª–µ–¥–Ω—è—è ‚è≠Ô∏è"
                                 action="#{magicCityListBean.lastPage}"
                                 disabled="#{magicCityListBean.currentPage >= magicCityListBean.totalPages}"
                                 styleClass="btn"/>

                <div style="margin-top: 10px; color: #666;">
                    –ü–æ–∫–∞–∑–∞–Ω–æ #{magicCityListBean.cities.size()} –∏–∑ #{magicCityListBean.totalCount} –≥–æ—Ä–æ–¥–æ–≤
                    (–ø–æ 20 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ)
                </div>
            </div>
        </h:form>
    </div>
</h:body>
</html>